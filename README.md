# 26.2. Celery. Условия домашки.

### Контекст: зачем решать подобные задачи

Так как каждый веб-сервис стремится отвечать всё быстрее, выполнение задач в синхронном режиме становится недоступным. То есть клиент не должен ждать, когда отправится письмо и почтовый сервис ответит. Именно поэтому появились отложенные и фоновые задачи — чтобы сокращать время обработки запроса пользователя и отдавать информацию как можно оперативнее.

### Критерий выполнения заданий

* Результат всех заданий залили на GitHub и сдали в виде ссылки на репозиторий.

## Задание 1

Настройте проект для работы с Celery. Также настройте приложение на работу с celery-beat для выполнения периодических задач.

_Не забудьте вынести настройки Redis в переменные окружения._

## Задание 2

Ранее вы реализовали функционал подписки на обновление курсов. Теперь добавьте асинхронную рассылку писем пользователям об обновлении материалов курса.

#### Подсказка

Чтобы реализовать асинхронную рассылку, вызывайте специальную задачу по отправке письма в коде контроллера. То есть вызов задачи на отправку сообщения должен происходить в контроллере обновления курса: когда курс обновлен — тем, кто подписан на обновления именно этого курса, отправляется письмо на почту.

### Дополнительное задание

Пользователь может обновлять каждый урок курса отдельно. Добавьте проверку на то, что уведомление отправляется только в том случае, если курс не обновлялся более четырех часов.

## Задание 3

С помощью celery-beat реализуйте фоновую задачу, которая будет проверять пользователей по дате последнего входа по полю **_last_login_** и, если пользователь не заходил более месяца, блокировать его с помощью флага **_is_active_**.

_Задачу сделайте периодической и запланируйте расписание в настройках celery-beat._

_Обратите внимание на timezone вашего приложения и timezone в настройках celery: важно, чтобы они были одинаковыми, чтобы задачи запускались в корректное время._

